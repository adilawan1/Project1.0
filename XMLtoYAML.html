<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>XML to YAML</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fast-xml-parser/4.1.2/fxparser.min.js" integrity="sha512-iXGw9+hLdQ/UOeb3jmfh+Rcp8MAaH+vRUwUBI9QXZytEDNWpO3ud4xfja86dBDKxmLIRVNxXwEPiN1dRolgYfg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <h1>XML to YAML Converter</h1>
    <h4>YAML:</h4>
    <textarea
      id="YAML"
      rows="5"
      style="width: 45%; font-size: larger"
    ></textarea>
    <h4>XML:</h4>
    <textarea
      id="XML"
      rows="5"
      style="width: 45%; font-size: larger"
    ></textarea>
    <div>
      <button onclick="fileHandling()">Upload a File</button>
      <button onclick="XML2JS()">Convert to YAML</button>
    </div>
    <div><input id="url" placeholder="URL"></input></div>
    <button onclick='fetch(document.getElementById("url").value)
    .then(res => res.text())
    .then(text => document.getElementById("XML").innerHTML =text)'>URL</button>
    <button onclick="location.reload()">RESET</button>
    <!-- XML TO YAML Function -->
    <script>
      function fileHandling() {
        var input = document.createElement("input");
        input.type = "file";
        input.onchange = (e) => {
          // getting a hold of the file reference
          var file = e.target.files[0];

          // setting up the reader
          var reader = new FileReader();
          reader.readAsText(file, "UTF-8"); // this is reading as data url

          // here we tell the reader what to do when it's done reading...
          reader.onload = (readerEvent) => {
            var content = readerEvent.target.result; // this is the content!
            document.querySelector("#XML").innerText = content;
          };
        };
        input.click();
      }
      const parser = new XMLParser();
      function XML2JS() {
        var xmlString = document.getElementById("XML").value;
        var Obj =parser.parse(xmlString)
        document.getElementById("YAML").innerHTML =jsyaml.dump(Obj)
      }
    </script>
  </body>
</html>
