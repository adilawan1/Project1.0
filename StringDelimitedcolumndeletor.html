<div class="custom-widget">
  <p>
    <label>
      Enter String Delimited Column
      <br />
      <textarea cols="40" rows="10" id="input" class="inputfull"></textarea>
    </label>
  </p>
  <p>
    <label>
      Enter Delimeter
      <br />
      <textarea cols="10" rows="1" id="del" class="inputfull"></textarea>
    </label>
  </p>

  <p>
    <label>
      Enter Column Number
      <br />
      <textarea cols="10" rows="1" id="num" class="inputfull"></textarea>
    </label>
  </p>

  <p>
    <input
      id="input-convert"
      type="submit"
      onclick="XTSV()"
      value="Delete Column"
    />
  </p>

  <p>
    <label
      >Column<br />
      <textarea cols="40" rows="10" id="output" class="inputfull" readonly="">
      </textarea>
    </label>
  </p>
  <script>
    // Helper function to convert CSV to Rows
    function XTSV() {
      const tsvStr = document.getElementById("input").value;
      const num = document.getElementById("num").value;
      const del = document.getElementById("del").value;
      const txtString = `${Tsvcoldel(tsvStr)}`;
      function Tsvcoldel(obj) {
        let arr = obj.split("\n");
        let col = arr[0].split(del);
        let row = arr.length;
        let text = "";
        if (num - 1 >= 0 && num - 1 <= col.length) {
          for (let j = 0; j < row; j++) {
            for (let i = 0; i < col.length; i++) {
              if (num - 1 !== i) {
                if (
                  i === col.length - 1 ||
                  (i === col.length - 2 && num == col.length)
                )
                  text += arr[j].split(del)[i] + "";
                else text += arr[j].split(del)[i] + del;
              }
            }
            text += "\n";
          }
          return text;
        } else {
          alert("Enter Correct Column Number");
          location.reload();
        }
      }
      document.getElementById("output").innerHTML = txtString;
    }
  </script>
</div>
