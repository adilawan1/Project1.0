<div>
  <h1>XML to JSON Converter</h1>
  <h4>JSON:</h4>
  <textarea id="JSON" rows="5" style="width: 45%; font-size: larger"></textarea>
  <h4>XML:</h4>
  <textarea id="XML" rows="5" style="width: 45%; font-size: larger"></textarea>
  <div>
    <button onclick="fileHandling()">Upload a File</button>
    <button onclick="XML2JS()">Convert to JSON</button>
  </div>
  <div><input id="url" placeholder="URL" /></div>
  <button
    onclick='fetch(document.getElementById("url").value)
    .then(res => res.text())
    .then(text => document.getElementById("XML").innerHTML =text)'
  >
    URL
  </button>
  <button onclick="location.reload()">RESET</button>
  <!-- XML TO JSON Function -->
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/fast-xml-parser/4.1.2/fxparser.min.js"
    integrity="sha512-iXGw9+hLdQ/UOeb3jmfh+Rcp8MAaH+vRUwUBI9QXZytEDNWpO3ud4xfja86dBDKxmLIRVNxXwEPiN1dRolgYfg=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  ></script>
  <script>
    function fileHandling() {
      var input = document.createElement("input");
      input.type = "file";
      input.onchange = (e) => {
        // getting a hold of the file reference
        var file = e.target.files[0];

        // setting up the reader
        var reader = new FileReader();
        reader.readAsText(file, "UTF-8"); // this is reading as data url

        // here we tell the reader what to do when it's done reading...
        reader.onload = (readerEvent) => {
          var content = readerEvent.target.result; // this is the content!
          document.querySelector("#XML").innerText = content;
        };
      };
      input.click();
    }

    const parser = new XMLParser();
    function XML2JS() {
      var xmlString = document.getElementById("XML").value;
      xmlString = xmlString.replace(
        '<?xml version="1.0" encoding="utf-8"?>',
        ""
      );
      var jsonObj = parser.parse(xmlString);
      document.getElementById("JSON").innerHTML = JSON.stringify(
        jsonObj,
        null,
        2
      );
    }
  </script>
</div>
